{
    "componentChunkName": "component---node-modules-gatsby-theme-primer-wiki-src-templates-post-query-js",
    "path": "/docs/recipes/capture-notes-with-drafts-pro/",
    "result": {"data":{"mdx":{"id":"8f597308-cef7-5dcc-a5cd-bf62f8c54161","tableOfContents":{"items":[{"url":"#capture-notes-with-drafts-pro","title":"Capture Notes With Drafts Pro","items":[{"url":"#context","title":"Context"},{"url":"#other-tools","title":"Other tools"},{"url":"#instructions","title":"Instructions"},{"url":"#code-for-drafts-action","title":"Code for Drafts Action"}]}]},"fields":{"title":"Capture Notes With Drafts Pro","slug":"/docs/recipes/capture-notes-with-drafts-pro/","url":"https://demo-foam.owenyoung.com/docs/recipes/capture-notes-with-drafts-pro/","editUrl":"https://github.com/theowenyoung/foam-template-gatsby-theme-primer-wiki/tree/main/docs/recipes/capture-notes-with-drafts-pro.md","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025","gitCreatedAt":"2025-12-08T01:18:52.000Z","shouldShowTitle":false},"frontmatter":{"title":"","description":null,"imageAlt":null,"tags":[],"date":null,"dateModified":null,"language":null,"seoTitle":null,"image":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"capture-notes-with-drafts-pro\"\n  }, \"Capture Notes With Drafts Pro\"), mdx(\"p\", null, \"With this #recipe you can create notes on your iOS device, which will automatically be imported into Foam.\"), mdx(\"h2\", {\n    \"id\": \"context\"\n  }, \"Context\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You use \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://marketplace.visualstudio.com/items?itemName=foam.foam-vscode\"\n  }, \"Foam for VSCode\"), \" to manage your notes\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You wish to adopt a practice such as \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://notes.andymatuschak.org/A%20writing%20inbox%20for%20transient%20and%20incomplete%20notes\"\n  }, \"A writing inbox for transient and incomplete notes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You wish to use \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.getdrafts.com/\"\n  }, \"Drafts Pro\"), \" to capture quick notes into your Foam notes from your iOS device\")), mdx(\"h2\", {\n    \"id\": \"other-tools\"\n  }, \"Other tools\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We assume you are familiar with how to use GitHub (if you are using Foam this is implicit)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You have an iOS device with \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://getdrafts.com/\"\n  }, \"Drafts\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You have upgraded to \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.getdrafts.com/draftspro\"\n  }, \"Drafts Pro\"), \" (needed to edit actions).\")), mdx(\"h2\", {\n    \"id\": \"instructions\"\n  }, \"Instructions\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.getdrafts.com/docs/actions/editing-actions\"\n  }, \"Create a new action in Drafts\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add a single \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.getdrafts.com/actions/steps/\"\n  }, \"step\"), \" of type Script\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Edit the script adding the code from the block below\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Edit settings at the top of the script to suit your preferences\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Set other Action options in Drafts as you wish\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Save the Action\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In GitHub \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/settings/tokens\"\n  }, \"create a Personal Access Token\"), \" and give it \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"repo\"), \" scope - make a note of the token\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In Drafts create a note\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select the action you created in steps 1-6\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"On the first run you will need to add the following information:\", mdx(\"ol\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"your GitHub username\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the repository name of your Foam repo\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the GitHub access token from step 7\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An author name\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check your GitHub repo for a commit\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If you are publishing your Foam to the web you may want to edit your publishing configuration to exclude inbox files - as publishing (and method) is a user choice that is beyond the scope of this recipe\")), mdx(\"h2\", {\n    \"id\": \"code-for-drafts-action\"\n  }, \"Code for Drafts Action\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"// adapted from https://forums.getdrafts.com/t/script-step-post-to-github-without-working-copy/3594\\n// post to writing inbox in Foam digital garden\\n\\n/*\\n * edit these lines to suit your preferences\\n */\\nconst inboxFolder = \\\"inbox/\\\";   // the folder in your Foam repo where notes are saved. MUST have trailing slash, except for root of repo use ''\\nconst requiredTags = ['inbox']; // all documents will have these added in addition to tags from the Drafts app\\nconst addLinkToInbox = true;    // true = created note will have link to [[index]], false = no link\\nconst addTimeStamp = true;      // true = add a note of capture date/time at foot of note\\n\\n/*\\n * stop editing\\n */\\n\\nconst credential = Credential.create(\\\"GitHub garden repo\\\", \\\"The repo name, and its credentials, hosting your Foam notes\\\");\\ncredential.addTextField(\\\"username\\\", \\\"GitHub Username\\\");\\ncredential.addTextField('repo', 'Repo name');\\ncredential.addPasswordField(\\\"key\\\", \\\"GitHub personal access token\\\");\\ncredential.addTextField('author', 'Author');\\ncredential.authorize();\\n\\nconst githubKey = credential.getValue('key');\\nconst githubUser = credential.getValue('username');\\nconst repo = credential.getValue('repo');\\nconst author = credential.getValue('author');\\n\\nconst http = HTTP.create(); // create HTTP object\\nconst base = 'https://api.github.com';\\n\\n\\nconst posttime = new Date();\\nconst title = draft.title;\\nconst txt = draft.processTemplate(\\\"[[line|3..]]\\\");\\nconst mergedTags = [...draft.tags, ...requiredTags];\\nconst slugbase = title.toLowerCase().replace(/\\\\s/g, \\\"-\\\");\\n\\nconst datestr = `${posttime.getFullYear()}-${pad(posttime.getMonth() + 1)}-${pad(posttime.getDate())}`;\\nconst timestr = `${pad(posttime.getHours())}:${pad(posttime.getMinutes())}:00`;\\nconst yr = `${posttime.getFullYear()}`;\\nconst pdOffset = posttime.getTimezoneOffset();\\nconst offsetChar = pdOffset >= 0 ? '-' : '+';\\nvar pdHours = Math.floor(pdOffset/60);\\nconsole.log(pdHours);\\npdHours = pdHours >= 0 ? pdHours : pdHours * -1;\\nconsole.log(pdHours);\\nconst tzString = `${offsetChar}${pad(pdHours)}:00`;\\nconst postdate = `${datestr}T${timestr}${tzString}`;\\n\\n\\nconst slug = `${slugbase}`\\nconst fn = `${slug}.md`;\\nlet preamble = `# ${title} \\\\n\\\\n`;\\n\\nmergedTags.forEach(function(item,index){\\n   preamble += `#${item} `;\\n  }\\n);\\n\\nif (addLinkToInbox) {\\n    preamble += \\\"\\\\n\\\\n[[inbox]]\\\\n\\\";\\n}\\n\\npreamble += \\\"\\\\n\\\\n\\\";\\n\\nvar doc = `${preamble}${txt}`;\\n\\nif (addTimeStamp){\\n\\n    doc += `\\\\n\\\\nCaptured: ${postdate}\\\\n`\\n}\\n\\nconst options = {\\n    url: `https://api.github.com/repos/${githubUser}/${repo}/contents/${inboxFolder}${fn}`,\\n    method: 'PUT',\\n    data: {\\n        message: `Inbox from Drafts ${datestr}`,\\n        content: Base64.encode(doc)\\n    },\\n    headers: {\\n        'Authorization': `token ${githubKey}`\\n    }\\n};\\n\\nvar response = http.request(options);\\n\\nif (response.success) {\\n    // yay\\n} else {\\n    console.log(response.statusCode);\\n    console.log(response.error);\\n}\\n\\nfunction pad(n) {\\n    let str = String(n);\\n    while (str.length < 2) {\\n        str = `0${str}`;\\n    }\\n    return str;\\n}\\n\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawBody":"# Capture Notes With Drafts Pro\r\n\r\nWith this #recipe you can create notes on your iOS device, which will automatically be imported into Foam.\r\n\r\n## Context\r\n\r\n* You use [Foam for VSCode](https://marketplace.visualstudio.com/items?itemName=foam.foam-vscode) to manage your notes\r\n* You wish to adopt a practice such as [A writing inbox for transient and incomplete notes](https://notes.andymatuschak.org/A%20writing%20inbox%20for%20transient%20and%20incomplete%20notes)\r\n* You wish to use [Drafts Pro](https://docs.getdrafts.com/) to capture quick notes into your Foam notes from your iOS device\r\n\r\n## Other tools\r\n\r\n* We assume you are familiar with how to use GitHub (if you are using Foam this is implicit)\r\n* You have an iOS device with [Drafts](https://getdrafts.com/)\r\n* You have upgraded to [Drafts Pro](https://docs.getdrafts.com/draftspro) (needed to edit actions).\r\n\r\n## Instructions\r\n\r\n1. [Create a new action in Drafts](https://docs.getdrafts.com/docs/actions/editing-actions)\r\n2. Add a single [step](https://docs.getdrafts.com/actions/steps/) of type Script\r\n3. Edit the script adding the code from the block below\r\n4. Edit settings at the top of the script to suit your preferences\r\n5. Set other Action options in Drafts as you wish\r\n6. Save the Action\r\n7. In GitHub [create a Personal Access Token](https://github.com/settings/tokens) and give it `repo` scope - make a note of the token\r\n8. In Drafts create a note\r\n9. Select the action you created in steps 1-6\r\n10. On the first run you will need to add the following information:\r\n    1. your GitHub username\r\n    2. the repository name of your Foam repo\r\n    3. the GitHub access token from step 7\r\n    4. An author name\r\n11. Check your GitHub repo for a commit\r\n12. If you are publishing your Foam to the web you may want to edit your publishing configuration to exclude inbox files - as publishing (and method) is a user choice that is beyond the scope of this recipe\r\n\r\n## Code for Drafts Action\r\n\r\n```javascript\r\n// adapted from https://forums.getdrafts.com/t/script-step-post-to-github-without-working-copy/3594\r\n// post to writing inbox in Foam digital garden\r\n\r\n/*\r\n * edit these lines to suit your preferences\r\n */\r\nconst inboxFolder = \"inbox/\";   // the folder in your Foam repo where notes are saved. MUST have trailing slash, except for root of repo use ''\r\nconst requiredTags = ['inbox']; // all documents will have these added in addition to tags from the Drafts app\r\nconst addLinkToInbox = true;    // true = created note will have link to [[index]], false = no link\r\nconst addTimeStamp = true;      // true = add a note of capture date/time at foot of note\r\n\r\n/*\r\n * stop editing\r\n */\r\n\r\nconst credential = Credential.create(\"GitHub garden repo\", \"The repo name, and its credentials, hosting your Foam notes\");\r\ncredential.addTextField(\"username\", \"GitHub Username\");\r\ncredential.addTextField('repo', 'Repo name');\r\ncredential.addPasswordField(\"key\", \"GitHub personal access token\");\r\ncredential.addTextField('author', 'Author');\r\ncredential.authorize();\r\n\r\nconst githubKey = credential.getValue('key');\r\nconst githubUser = credential.getValue('username');\r\nconst repo = credential.getValue('repo');\r\nconst author = credential.getValue('author');\r\n\r\nconst http = HTTP.create(); // create HTTP object\r\nconst base = 'https://api.github.com';\r\n\r\n\r\nconst posttime = new Date();\r\nconst title = draft.title;\r\nconst txt = draft.processTemplate(\"[[line|3..]]\");\r\nconst mergedTags = [...draft.tags, ...requiredTags];\r\nconst slugbase = title.toLowerCase().replace(/\\s/g, \"-\");\r\n\r\nconst datestr = `${posttime.getFullYear()}-${pad(posttime.getMonth() + 1)}-${pad(posttime.getDate())}`;\r\nconst timestr = `${pad(posttime.getHours())}:${pad(posttime.getMinutes())}:00`;\r\nconst yr = `${posttime.getFullYear()}`;\r\nconst pdOffset = posttime.getTimezoneOffset();\r\nconst offsetChar = pdOffset >= 0 ? '-' : '+';\r\nvar pdHours = Math.floor(pdOffset/60);\r\nconsole.log(pdHours);\r\npdHours = pdHours >= 0 ? pdHours : pdHours * -1;\r\nconsole.log(pdHours);\r\nconst tzString = `${offsetChar}${pad(pdHours)}:00`;\r\nconst postdate = `${datestr}T${timestr}${tzString}`;\r\n\r\n\r\nconst slug = `${slugbase}`\r\nconst fn = `${slug}.md`;\r\nlet preamble = `# ${title} \\n\\n`;\r\n\r\nmergedTags.forEach(function(item,index){\r\n   preamble += `#${item} `;\r\n  }\r\n);\r\n\r\nif (addLinkToInbox) {\r\n    preamble += \"\\n\\n[[inbox]]\\n\";\r\n}\r\n\r\npreamble += \"\\n\\n\";\r\n\r\nvar doc = `${preamble}${txt}`;\r\n\r\nif (addTimeStamp){\r\n\r\n    doc += `\\n\\nCaptured: ${postdate}\\n`\r\n}\r\n\r\nconst options = {\r\n    url: `https://api.github.com/repos/${githubUser}/${repo}/contents/${inboxFolder}${fn}`,\r\n    method: 'PUT',\r\n    data: {\r\n        message: `Inbox from Drafts ${datestr}`,\r\n        content: Base64.encode(doc)\r\n    },\r\n    headers: {\r\n        'Authorization': `token ${githubKey}`\r\n    }\r\n};\r\n\r\nvar response = http.request(options);\r\n\r\nif (response.success) {\r\n    // yay\r\n} else {\r\n    console.log(response.statusCode);\r\n    console.log(response.error);\r\n}\r\n\r\nfunction pad(n) {\r\n    let str = String(n);\r\n    while (str.length < 2) {\r\n        str = `0${str}`;\r\n    }\r\n    return str;\r\n}\r\n\r\n```\r\n","excerpt":"Capture Notes With Drafts Pro With this #recipe you can create notes on your iOS device, which will automatically be imported into Foam. Coâ€¦","outboundReferences":[],"inboundReferences":[]},"tagsOutbound":{"nodes":[]}},"pageContext":{"tags":[],"slug":"/docs/recipes/capture-notes-with-drafts-pro/","sidebarItems":[{"title":"","items":[{"title":"Recently Updated","url":"/latest/","collapse":true,"indent":false,"items":[{"title":"01-02: MEMMS - TO DO item","url":"/## MEMMS TO DO/"},{"title":"01-02: 2025-12-08","url":"/journal/2025-12-08/"},{"title":"12-08: Foam","url":"/"},{"title":"12-08: Getting Started","url":"/getting-started/"},{"title":"12-08: Inbox","url":"/inbox/"},{"title":"12-08: Todo","url":"/todo/"},{"title":"12-08: Frequently Asked Questions","url":"/docs/frequently-asked-questions/"},{"title":"12-08: Using Foam","url":"/docs/"},{"title":"12-08: Backlinks","url":"/docs/features/backlinking/"},{"title":"12-08: Custom Markdown Preview Styles","url":"/docs/features/custom-markdown-preview-styles/"}]}]},{"title":"Tags","items":[{"title":"MEMMS","type":"tag","url":"/tags/memms/","items":[{"title":"MEMMS - TO DO item","url":"/## MEMMS TO DO/"}]},{"title":"TO_DO","type":"tag","url":"/tags/to-do/","items":[{"title":"MEMMS - TO DO item","url":"/## MEMMS TO DO/"}]},{"title":"bonjour","type":"tag","url":"/tags/bonjour/","items":[{"title":"Note Properties","url":"/docs/features/note-properties/"}]},{"title":"hello","type":"tag","url":"/tags/hello/","items":[{"title":"Note Properties","url":"/docs/features/note-properties/"}]}]}],"tagsGroups":[{"title":"MEMMS","type":"tag","url":"/tags/memms/","items":[{"title":"MEMMS - TO DO item","url":"/## MEMMS TO DO/"}]},{"title":"TO_DO","type":"tag","url":"/tags/to-do/","items":[{"title":"MEMMS - TO DO item","url":"/## MEMMS TO DO/"}]},{"title":"bonjour","type":"tag","url":"/tags/bonjour/","items":[{"title":"Note Properties","url":"/docs/features/note-properties/"}]},{"title":"hello","type":"tag","url":"/tags/hello/","items":[{"title":"Note Properties","url":"/docs/features/note-properties/"}]}],"latestPosts":[{"fields":{"slug":"/## MEMMS TO DO/","title":"MEMMS - TO DO item","lastUpdatedAt":"2026-01-02T03:33:01.000Z","lastUpdated":"1/2/2026"},"frontmatter":{"draft":false,"tags":["MEMMS","TO_DO"]}},{"fields":{"slug":"/journal/2025-12-08/","title":"2025-12-08","lastUpdatedAt":"2026-01-02T03:33:01.000Z","lastUpdated":"1/2/2026"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/","title":"Foam","lastUpdatedAt":"2025-12-08T08:03:40.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/getting-started/","title":"Getting Started","lastUpdatedAt":"2025-12-08T06:14:35.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/inbox/","title":"Inbox","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/todo/","title":"Todo","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/docs/frequently-asked-questions/","title":"Frequently Asked Questions","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/docs/","title":"Using Foam","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/docs/features/backlinking/","title":"Backlinks","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/docs/features/custom-markdown-preview-styles/","title":"Custom Markdown Preview Styles","lastUpdatedAt":"2025-12-08T01:18:52.000Z","lastUpdated":"12/8/2025"},"frontmatter":{"draft":false,"tags":[]}}]}},
    "staticQueryHashes": ["2230547434","2320115945","3495835395","451533639"]}